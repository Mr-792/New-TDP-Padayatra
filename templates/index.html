{% load static %}

<!doctype html>
<html lang="en">

<head>

    <meta charset="utf-8" />
    <title>TDP | Padayatra</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
    <meta content="Themesbrand" name="author" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="{% static 'assets/images/logo-dark.png' %}">
    <!-- DataTables -->
    <link href="{% static 'assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css' %}" rel="stylesheet"
        type="text/css" />
    <link href="{% static 'assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css' %}" rel="stylesheet"
        type="text/css" />

    <!-- Responsive datatable examples -->
    <link href="{% static 'assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css' %}"
        rel="stylesheet" type="text/css" />
    <!-- Bootstrap Css -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" id="bootstrap-style" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="{% static 'assets/css/icons.min.css' %}" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="{% static 'assets/css/app.min.css' %}" id="app-style" rel="stylesheet" type="text/css" />


</head>

<body data-layout="horizontal" data-topbar="colored" data-layout-size="boxed">

    <!-- Begin page -->
    <div id="layout-wrapper">

        <header id="page-topbar">
            <div class="navbar-header">
                <div class="d-flex">
                    <!-- LOGO -->
                    <div class="navbar-brand-box">
                        <a href="#" class="logo logo-dark">
                            <span class="logo-sm">
                                <img src="{% static 'assets/images/logo-dark.png' %}" alt="" height="68">
                            </span>
                            <span class="logo-lg">
                                <img src="{% static 'assets/images/logo-dark.png' %}" alt="" height="68">
                            </span>
                        </a>

                        <a href="#" class="logo logo-light">
                            <span class="logo-sm">
                                <img src="{% static 'assets/images/logo-dark.png' %}" alt="" height="68">
                            </span>
                            <span class="logo-lg">
                                <img src="{% static 'assets/images/logo-dark.png' %}" alt="" height="68">
                            </span>
                        </a>
                    </div>

                    <button type="button"
                        class="btn btn-sm px-3 font-size-16 d-lg-none header-item waves-effect waves-light"
                        data-bs-toggle="collapse" data-bs-target="#topnav-menu-content">
                        <i class="fa fa-fw fa-bars"></i>
                    </button>

                    <!-- App Search-->
                    <form class="app-search d-none d-lg-block">
                        <div class="position-relative">
                            <input type="text" class="form-control" placeholder="Search...">
                            <span class="uil-search"><i class="fas fa-search"></i></span>
                        </div>
                    </form>
                </div>

                <div class="d-flex">

                    <div class="dropdown d-inline-block d-lg-none ms-2">
                        <button type="button" class="btn header-item noti-icon waves-effect"
                            id="page-header-search-dropdown" data-bs-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <i class="fas fa-search"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0"
                            aria-labelledby="page-header-search-dropdown">

                            <form class="p-3">
                                <div class="m-0">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Search ..." aria-label="">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="submit"><i
                                                    class="fas fa-search"></i></i></button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>




                    <div class="dropdown d-inline-block">
                        <button type="button"
                            class="btn header-item waves-effect d-flex align-items-center justify-content-center"
                            id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <img class="rounded-circle header-profile-user"
                                src="{% static 'assets/images/avatar-img.png' %}" alt="Header Avatar">
                            <span
                                class="d-none d-xl-inline-block ms-1 fw-medium font-size-15 text-white">{{user.user_name}}</span>
                            <i class="arrow-down d-none d-xl-inline-block font-size-15 text-white"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end">
                            <!-- item-->
                            <!-- <a class="dropdown-item" href="\admin/change-password/"><i class="fas fa-unlock font-size-15 align-middle text-muted me-1"></i> <span class="align-middle">Change Password</span></a> -->



                            <a class="dropdown-item" href="\logout/"><i
                                    class="fas fa-sign-out-alt font-size-15 align-middle me-1 text-muted"></i><span
                                    class="align-middle">Sign out</span></a>
                        </div>
                    </div>



                </div>
            </div>

            <div class="container-fluid">
                <div class="topnav">
                    {% if user.is_superadmin %}
                    <nav class="navbar navbar-light navbar-expand-lg topnav-menu">

                        <div class="collapse navbar-collapse" id="topnav-menu-content">
                            <ul class="navbar-nav">

                                <li class="nav-item">
                                    <a class="nav-link" href="\{{user.user_name}}/dashboard/">
                                        <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                                    </a>
                                </li>



                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle arrow-none" href="#" id="topnav-pages"
                                        role="button">
                                        <i class="fas fa-stream me-2"></i>Timelines <div class="arrow-down"></div>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="topnav-pages">


                                        <a href="\{{user.user_name}}/posts/" class="dropdown-item">
                                            <div class="arrow-right"></div>Posts
                                        </a>
                                        <a href="\{{user.user_name}}/stories/" class="dropdown-item">Stories</a>
                                        <a href="\{{user.user_name}}/banners/" class="dropdown-item">Banners</a>


                                    </div>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle arrow-none" href="#" id="topnav-pages"
                                        role="button">
                                        <i class="fas fa-walking me-2"></i>Padayatra <div class="arrow-down"></div>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="topnav-pages">

                                        <a href="\{{user.user_name}}/schedule-padayatra/" class="dropdown-item">Schedule
                                            Padayatra</a>
                                        <a href="\{{user.user_name}}/padayatra-list/" class="dropdown-item">List of
                                            Padayatra</a>

                                    </div>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="\{{user.user_name}}/users/">
                                        <i class="fa fa-users me-2"></i> Users
                                    </a>
                                </li>





                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
            {% elif user.is_manager %}
            <div class="container-fluid">
                <div class="topnav">

                    <nav class="navbar navbar-light navbar-expand-lg topnav-menu">

                        <div class="collapse navbar-collapse" id="topnav-menu-content">
                            <ul class="navbar-nav">

                                <li class="nav-item">
                                    <a class="nav-link" href="\{{user.user_name}}/dashboard/">
                                        <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                                    </a>
                                </li>



                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle arrow-none" href="#" id="topnav-pages"
                                        role="button">
                                        <i class="fas fa-stream me-2"></i>Timelines <div class="arrow-down"></div>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="topnav-pages">


                                        <a href="\{{user.user_name}}/posts/" class="dropdown-item">
                                            <div class="arrow-right"></div>Posts
                                        </a>
                                        <a href="\{{user.user_name}}/stories/" class="dropdown-item">Stories</a>
                                        <a href="\{{user.user_name}}/banners/" class="dropdown-item">Banners</a>


                                    </div>
                                </li>
                                <!-- <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle arrow-none" href="#" id="topnav-pages" role="button">
                                            <i class="fas fa-walking me-2"></i>Padayatra <div class="arrow-down"></div>
                                        </a>
                                        <div class="dropdown-menu" aria-labelledby="topnav-pages">

                                            <a href="\create_padayatra/{{username}}/" class="dropdown-item">Schedule Padayatra</a>
                                            <a href="\list_padayatra/{{username}}/" class="dropdown-item">List of Padayatra</a>
											
                                        </div>
                                    </li>
                                     <li class="nav-item">
                                        <a class="nav-link" href="#">
                                            <i class="fa fa-users me-2"></i> Users
                                        </a>
                                    </li> -->





                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
            {% elif user.is_supervisor %}
            <div class="container-fluid">
                <div class="topnav">

                    <nav class="navbar navbar-light navbar-expand-lg topnav-menu">

                        <div class="collapse navbar-collapse" id="topnav-menu-content">
                            <ul class="navbar-nav">

                                <li class="nav-item">
                                    <a class="nav-link" href="\{{user.user_name}}/dashboard/">
                                        <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                                    </a>
                                </li>



                                <!-- <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle arrow-none" href="#" id="topnav-pages" role="button">
											<i class="fas fa-stream me-2"></i>Timelines <div class="arrow-down"></div>
                                        </a>
                                        <div class="dropdown-menu" aria-labelledby="topnav-pages">

                                          
                                            <a href="\posts_list/{{username}}/" class="dropdown-item"><div class="arrow-right"></div>Posts</a>
											   <a href="\stories/{{username}}/" class="dropdown-item">Stories</a>
											  <a href="\banners/{{username}}/" class="dropdown-item">Banners</a>
											
											
                                        </div>
                                    </li>
										<li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle arrow-none" href="#" id="topnav-pages" role="button">
                                            <i class="fas fa-walking me-2"></i>Padayatra <div class="arrow-down"></div>
                                        </a>
                                        <div class="dropdown-menu" aria-labelledby="topnav-pages">

                                            <a href="\create_padayatra/{{username}}/" class="dropdown-item">Schedule Padayatra</a>
                                            <a href="\list_padayatra/{{username}}/" class="dropdown-item">List of Padayatra</a>
											
                                        </div>
                                    </li>
                                     <li class="nav-item">
                                        <a class="nav-link" href="#">
                                            <i class="fa fa-users me-2"></i> Users
                                        </a>
                                    </li> -->





                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
            {% endif %}
        </header>



        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="main-content">

            <div class="page-content">
                <div class="container-fluid">

                    <!-- start page title -->
                    <!-- <div class="row"> -->
                    <!-- <div class="col-12"> -->
                    <!-- <div class="page-title-box d-flex align-items-center justify-content-between"> -->
                    <!-- <h4 class="mb-0">Horizontal</h4> -->

                    <!-- <div class="page-title-right"> -->
                    <!-- <ol class="breadcrumb m-0"> -->
                    <!-- <li class="breadcrumb-item"><a href="javascript: void(0);">Layout</a></li> -->
                    <!-- <li class="breadcrumb-item active">Horizontal</li> -->
                    <!-- </ol> -->
                    <!-- </div> -->

                    <!-- </div> -->
                    <!-- </div> -->
                    <!-- </div> -->
                    <!-- <!-- end page title -->

                    <div class="row">
                        <div class="col-md-6 col-xl-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="float-end mt-2">
                                        <div id="total-revenue-chart" data-colors='["--bs-primary"]'></div>
                                    </div>
                                    <div>
                                        <h4 class="mb-1 mt-1" id="totalPostsCount"></h4>
                                        <p class="text-muted mb-0">Total Posts</p>
                                    </div>

                                </div>
                            </div>
                        </div> <!-- end col-->
                        <div class="col-md-6 col-xl-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="float-end mt-2">
                                        <div id="orders-chart" data-colors='["--bs-success"]'> </div>
                                    </div>
                                    <div>
                                        <h4 class="mb-1 mt-1" id="totalUsersCount"></h4>
                                        <p class="text-muted mb-0">Total Users</p>
                                    </div>

                                </div>
                            </div>
                        </div> <!-- end col-->
                        <div class="col-md-6 col-xl-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="float-end mt-2">
                                        <div id="customers-chart" data-colors='["--bs-primary"]'> </div>
                                    </div>
                                    <div>
                                        <h4 class="mb-1 mt-1">26</h4>
                                        <p class="text-muted mb-0">Total Padayatra Districts</p>
                                    </div>

                                </div>
                            </div>
                        </div> <!-- end col-->
                        <div class="col-md-6 col-xl-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="float-end mt-2">
                                        <div id="growth-chart" data-colors='["--bs-warning"]'></div>
                                    </div>
                                    <div>
                                        <h4 class="mb-1 mt-1" id="totalSharesCount"></h4>
                                        <p class="text-muted mb-0">Total Sharing</p>
                                    </div>

                                </div>
                            </div>
                        </div> <!-- end col-->
                    </div> <!-- end row-->
                    <div class="row">
                        <div class="col-xl-4">
                            <div class="card">
                                <div class="card-body">

                                    <h4 class="card-title mb-4">Users Registrate for Padayatra</h4>

                                    <div data-simplebar style="max-height: 276px;">
                                        <div class="table-responsive">
                                            <table class="table table-borderless table-centered table-nowrap">
                                                <tbody id="PadayatraRegistrate">
                                                </tbody>
                                            </table>
                                        </div> <!-- enbd table-responsive-->
                                    </div> <!-- data-sidebar-->
                                </div><!-- end card-body-->
                            </div> <!-- end card-->
                        </div><!-- end col -->

                        <div class="col-xl-4">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title mb-4">Padayatra Activity</h4>
                                    <ol class="activity-feed mb-0 ps-2" data-simplebar style="max-height: 276px;">
                                        {% for item in padayatra_data reversed %}
                                        <li class="feed-item">
                                            <div class="feed-item-list">
                                                <p class="text-muted mb-1 font-size-13">Today<small
                                                        class="d-inline-block ms-1">{{item.padayatra.posted_on|date:"M
                                                        d, Y" }}</small></p>
                                                <p class="mb-0">{{item.padayatra.assembly_constituency}}: <span
                                                        class="color-red-tdp">{{item.padayatra.parliament_constituency}}
                                                        District</span></p>
                                            </div>
                                        </li>
                                        {% endfor %}
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-4">
                            <div class="card">
                                <div class="card-body">



                                    <h4 class="card-title">Social Sharing</h4>

                                    <div class="text-center">
                                        <div class="avatar-sm mx-auto mb-4">
                                            <span class="avatar-title rounded-circle bg-soft-primary font-size-24">
                                                <i class="fab fa-facebook-f text-primary"></i>
                                            </span>
                                        </div>
                                        <p class="font-16 text-muted mb-2"></p>
                                        <h5>
                                            <p class="text-dark">Facebook - <span
                                                    class="text-muted font-16">{{dashboard.facebook_shares}}
                                                    sharing</span> </p>
                                        </h5>
                                        <p class="text-muted">Maecenas nec odio et ante tincidunt tempus. Donec vitae
                                            sapien ut libero venenatis faucibus tincidunt.</p>

                                    </div>
                                    <div class="row mt-4">
                                        <div class="col-4">
                                            <div class="social-source text-center mt-3">
                                                <div class="avatar-xs mx-auto mb-3">
                                                    <span class="avatar-title rounded-circle bg-primary font-size-16">
                                                        <i class="fab fa-facebook-f text-white"></i>
                                                    </span>
                                                </div>
                                                <h5 class="font-size-15">Facebook</h5>
                                                <p class="text-muted mb-0">{{dashboard.whatsapp_shares}} sharing</p>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="social-source text-center mt-3">
                                                <div class="avatar-xs mx-auto mb-3">
                                                    <span class="avatar-title rounded-circle bg-whatsapp font-size-16">
                                                        <i class="fab fa-whatsapp text-white"></i>
                                                    </span>
                                                </div>
                                                <h5 class="font-size-15">Whatsapp</h5>
                                                <p class="text-muted mb-0">{{dashboard.instagram_shares}} sharing</p>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="social-source text-center mt-3">
                                                <div class="avatar-xs mx-auto mb-3">
                                                    <span class="avatar-title rounded-circle bg-pink font-size-16">
                                                        <i class="fab fa-instagram text-white"></i>
                                                    </span>
                                                </div>
                                                <h5 class="font-size-15">Instagram</h5>
                                                <p class="text-muted mb-0">{{dashboard.instagram_shares}} sharing</p>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end row -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">

                                    <h4 class="card-title mb-3 color-red-tdp">Districts wise Padayatra Details</h4>


                                    <table id="datatable" class="table table-bordered dt-responsive nowrap"
                                        style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                        <thead>
                                            <tr>
                                                <th>Parliament Constituency</th>
                                                <th>Assembly Constituency</th>
                                                <th>Village/Mandal</th>
                                                <th>Total Users</th>
                                                <th>Registered for Padayatra</th>
                                                <th>Status of Padayatra</th>

                                            </tr>
                                        </thead>


                                        <tbody>
                                            {% for item in padayatra_data %}
                                            <tr>
                                                <td>{{item.padayatra.parliament_constituency}}</td>
                                                <td>{{item.padayatra.assembly_constituency}}</td>
                                                <td>{{item.padayatra.village}}</td>
                                                <td>{{item.total_users}}</td>
                                                <td>{{item.registered_padayatra}}</td>

                                                <td>
                                                    <span
                                                        class="badge rounded-pill bg-success font-size-12">{{item.padayatra.status}}</span>
                                                </td>

                                            </tr>
                                            {% endfor %}


                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div> <!-- end col -->
                    </div> <!-- end row -->


                </div> <!-- container-fluid -->
            </div>
            <!-- End Page-content -->


            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-12 text-center">
                            <script>document.write(new Date().getFullYear())</script> Â© Telugu Desam Party Padayatra.
                        </div>

                    </div>
                </div>
            </footer>
        </div>
        <!-- end main content-->

    </div>
    <!-- END layout-wrapper -->





    <!-- JAVASCRIPT -->
    <script src="{% static 'assets/libs/jquery/jquery.min.js' %} "></script>
    <script src="{% static 'assets/libs/bootstrap/js/bootstrap.bundle.min.js' %} "></script>
    <script src="{% static 'assets/libs/metismenu/metisMenu.min.js' %} "></script>
    <script src="{% static 'assets/libs/simplebar/simplebar.min.js' %} "></script>
    <script src="{% static 'assets/libs/node-waves/waves.min.js' %} "></script>
    <script src="{% static 'assets/libs/waypoints/lib/jquery.waypoints.min.js' %} "></script>
    <script src="{% static 'assets/libs/jquery.counterup/jquery.counterup.min.js' %} "></script>

    <!-- Required datatable js -->
    <script src="{% static 'assets/libs/datatables.net/js/jquery.dataTables.min.js' %} "></script>
    <script src="{% static 'assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js' %} "></script>
    <!-- Buttons examples -->
    <script src="{% static 'assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js' %} "></script>
    <script src="{% static 'assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js' %} "></script>
    <script src="{% static 'assets/libs/jszip/jszip.min.js' %} "></script>
    <script src="{% static 'assets/libs/pdfmake/build/pdfmake.min.js' %} "></script>
    <script src="{% static 'assets/libs/pdfmake/build/vfs_fonts.js' %} "></script>
    <script src="{% static 'assets/libs/datatables.net-buttons/js/buttons.html5.min.js' %} "></script>
    <script src="{% static 'assets/libs/datatables.net-buttons/js/buttons.print.min.js' %} "></script>
    <script src="{% static 'assets/libs/datatables.net-buttons/js/buttons.colVis.min.js' %} "></script>

    <!-- Responsive examples -->
    <script src="{% static 'assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js' %} "></script>
    <script src="{% static 'assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js' %} "></script>

    <!-- Datatable init js -->
    <script src="{% static 'assets/js/pages/datatables.init.js' %} "></script>
    <!-- apexcharts -->
    <script src="{% static 'assets/libs/apexcharts/apexcharts.min.js' %} "></script>



    <!-- App js -->
    <script src="{% static 'assets/js/app.js' %} "></script>
    <script>
        const users = $('#totalUsersCount')
        const posts = $('#totalPostsCount')
        const shares = $('#totalSharesCount')
        getData()
        async function getData() {
            const response = await fetch('http://localhost:8000/dashboard/')
            var data = await response.json();
            console.log(data)
            users.append(data.total_users)
            posts.append(data.total_posts)
            shares.append(data.total_sharing)
        }
    </script>
    <script>
        getdist()
        async function getdist() {
            const response = await fetch('http://localhost:8000/get_padayatra_registrate')
            var data = await response.json();
            // console.log(data)
            for (var key in data) {
                $('#PadayatraRegistrate').append(` <tr>
                                                            <td>
                                                                    <h6 class="font-size-15 mb-1 fw-normal districtName">${key}</h6>
                                                                    <p class="font-size-13 mb-0 text-muted"><i class="fas fa-map-marker-alt  districtName"></i><b>${key}</b> District</p>
                                                                </td>
                                                               
                                                                <td class="color-red-tdp fw-semibold text-end" id="totalDistrictUsers">${data[key]}</td>
                                                            </tr> `)

                console.log(key, data[key]);
            }
        }
    </script>
    <!-- <script>
    const users=$('#totalUsersCount')
    const posts=$('#totalPostsCount')
    const shares=$('#totalSharesCount')
    getData()
    async function getData(){
            const response = await fetch('http://localhost:8000/feed/dashboard/')
            var data = await response.json();
        console.log(data)
        users.append(data.total_users)
        posts.append(data.total_posts)
        shares.append(data.total_sharing)
    } 
</script> -->


</body>

</html>